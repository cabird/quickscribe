{% extends "base.html" %}

{% block title %}Uploaded Recordings{% endblock %}

{% block content %}
<h1>List of Uploaded Files</h1>

<table>
    <thead>
        <tr>
            <th>Original Filename</th>
            <th>File Size (Bytes)</th>
            <th>Transcription Status</th>
        </tr>
    </thead>
    <tbody>
        {% for recording in recordings %}
            <tr>
                <td><a href="{{ recording.download_url }}" download>{{ recording.original_filename }}</a></td>
                <td>{{ recording.file_size }}</td>
                <td>
                    {% if recording.transcription_status == 'completed' %}
                        <div><a href="{{ url_for('view_transcription', transcription_id=recording.transcription_id) }}">View Transcription</a></div>
                        
                        <!-- Show "Infer Speaker Names" link if speaker names haven't been inferred -->
                        {% if not recording.speaker_names_inferred %}
                            <div><a href="{{ url_for('infer_speaker_names', transcription_id=recording.transcription_id) }}">Infer Speaker Names</a></div>
                        {% endif %}
                    {% elif recording.transcription_status == 'in_progress' %}
                        <span>Transcription in Progress...</span>
                    {% elif recording.transcription_status == 'not_started' %}
                        <div><a href="{{ url_for('start_transcription', recording_id=recording.recording_id) }}">Start Transcription</a></div>
                    {% else %}
                        <span>Unknown Status</span>
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<br>
<a href="{{ url_for('index') }}">Go back to the homepage</a>
{% endblock %}
